{% extends 'layout.html.twig' %}


{% block body %}
    <br>
    <a class="btn btn-primary" href="{{ path('event_new') }}">Créer un nouvelle évènement</a>
    <a class="btn btn-primary" href="{{ path('event_index') }}">Liste des évènements</a>
    <br>
    <br>
    <div id="calendar-holder"></div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        var now = "{{ 'now'|date('Y-m-d H:i:s') }}";
        {#var defaultDate = "{{ defaultDate|date('Y-m-d H:i:s') }}";#}
    </script>
    <script>require('assets/js/app/agenda.js');</script>
{#    <script type="text/javascript">#}
{#        document.addEventListener('DOMContentLoaded', () => {#}
{#            var calendarEl = document.getElementById('calendar-holder');#}

{#            var calendar = new FullCalendar.Calendar(calendarEl, {#}
{#                defaultView: 'agendaWeek',#}
{#                editable: true,#}
{#                slotLabelFormat:"HH:mm",#}
{#                slotDuration: '00:15:00',#}
{#                minTime: "08:00:00",#}
{#                maxTime: "18:30:00",#}
{#                timeFormat: "H:mm",#}
{#                allDaySlot: false,#}
{#                selectable: true,#}
{#                selectHelper: true,#}

{#                eventSources: [#}
{#                    {#}
{#                        url: "{{ path('fc_load_events') }}",#}
{#                        method: "POST",#}
{#                        extraParams: {#}
{#                            filters: JSON.stringify({})#}
{#                        },#}
{#                        failure: () => {#}
{#                            // alert("There was an error while fetching FullCalendar!");#}
{#                        },#}
{#                    },#}
{#                ],#}
{#                header: {#}
{#                    left: 'prev,next today',#}
{#                    center: 'title',#}
{#                    right: 'dayGridMonth,timeGridWeek,timeGridDay',#}
{#                },#}
{#                plugins: ['interaction', 'dayGrid', 'timeGrid'], // https://fullcalendar.io/docs/plugin-index#}
{#                timeZone: 'UTC',#}
{#            });#}
{#            calendar.render();#}
{#        });#}
{#    </script>#}
{% endblock %}
